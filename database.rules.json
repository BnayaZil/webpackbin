{
  "rules": {
    ".write": false,
    ".read": false,
    "activities": {
      ".read": true
    },
    "challenges": {
      ".read": true,
      "list": {
        ".indexOn": "startDatetime"
      },
      "posts": {
        "$challengeKey": {
          ".indexOn": "datetime"
        }
      },
      "leaderboards": {
        "$challengeKey": {
          "$teamKey": {
            "organizationMembers": {
              ".indexOn": "position"
            }
          }
        }
      }
    },
    "households": {
      ".read": true
    },
    "lastDeploy": {
      ".read": true
    },
    "notifications": {
      ".read": true,
      "$emailKey": {
        "list": {
          ".indexOn": "datetime"
        }
      }
    },
    "organizations": {
      ".read": true
    },
    "posts": {
      "list": {
        ".read": true,
        ".indexOn": "datetime"
      },
      "comments": {
        ".indexOn": "datetime",
        "$postKey": {
          ".read": true
        }
      }
    },
    "profiles": {
      ".read": true,
      "challenges": {
        "$profileKey": {
          ".indexOn": "endDatetime"
        }
      }
    },
    "queue": {
      "tasks": {
        ".indexOn": "_state",
        "$taskId": {
          ".write": "auth.uid != null",
          ".read": "auth.uid != null",
          "_state": {
            ".validate": "newData.isString()"
          },
          "_state_changed": {
            ".validate": "newData.isNumber() && (newData.val() === now || data.val() === newData.val())"
          },
          "_owner": {
            ".validate": "newData.isString()"
          },
          "_token": {
            ".validate": "newData.isString()"
          },
          "_progress": {
            ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 100"
          },
          "_error_details": {
            "error": {
              ".validate": "newData.isString()"
            },
            "error_stack": {
              ".validate": "newData.isString()"
            },
            "previous_state": {
              ".validate": "newData.isString()"
            },
            "original_task": {},
            "attempts": {
              ".validate": "newData.isNumber() && newData.val() > 0"
            },
            "$other": {
              ".validate": false
            }
          },
          "_id": {
            ".validate": "newData.isString()"
          }
        }
      },
      "specs": {
        ".read": false,
        ".write": false,
        "$specId": {
          ".validate": "newData.hasChild('in_progress_state')",
          "start_state": {
            ".validate": "newData.isString()"
          },
          "in_progress_state": {
            ".validate": "newData.isString()"
          },
          "finished_state": {
            ".validate": "newData.isString()"
          },
          "error_state": {
            ".validate": "newData.isString()"
          },
          "timeout": {
            ".validate": "newData.isNumber() && newData.val() > 0"
          },
          "$other": {
            ".validate": false
          }
        }
      }
    }
  }
}